$env:DEVICE='cpu'; $env:FAST_CPU_MODE='0'; $env:CPU_THREADS='24'; if (Test-Path .\.venv\Scripts\python.exe) { $py = ".\.venv\Scripts\python.exe" } else { $py = (Get-Command python -ErrorAction SilentlyContinue).Source }; if (-not $py) { Write-Error 'python not found'; exit }; foreach ($p in 8000,8501) { $c = Get-NetTCPConnection -State Listen -LocalPort $p -ErrorAction SilentlyContinue | Select-Object -First 1; if ($c) { try { Stop-Process -Id $c.OwningProcess -Force } catch {} } }; Start-Process -FilePath $py -ArgumentList '-m','uvicorn','app.api:app','--host','0.0.0.0','--port','8000' -WindowStyle Minimized; Start-Process -FilePath $py -ArgumentList '-m','streamlit','run','app/streamlit_app.py','--server.port=8501','--server.address=0.0.0.0' -WindowStyle Minimized; Start-Process 'http://localhost:8501'


$env:DEVICE='cuda'; $env:FAST_CPU_MODE='0'; $env:CPU_THREADS='24'; if (Test-Path .\.venv-gpu\Scripts\python.exe) { $py = ".\.venv-gpu\Scripts\python.exe" } elseif (Test-Path .\.venv\Scripts\python.exe) { $py = ".\.venv\Scripts\python.exe" } else { $py = (Get-Command python -ErrorAction SilentlyContinue).Source }; if (-not $py) { Write-Error 'python not found'; exit }; foreach ($p in 8000,8501) { $c = Get-NetTCPConnection -State Listen -LocalPort $p -ErrorAction SilentlyContinue | Select-Object -First 1; if ($c) { try { Stop-Process -Id $c.OwningProcess -Force } catch {} } }; Start-Process -FilePath $py -ArgumentList '-m','uvicorn','app.api:app','--host','0.0.0.0','--port','8000' -WindowStyle Minimized; Start-Process -FilePath $py -ArgumentList '-m','streamlit','run','app/streamlit_app.py','--server.port=8501','--server.address=0.0.0.0' -WindowStyle Minimized; Start-Process 'http://localhost:8501'
