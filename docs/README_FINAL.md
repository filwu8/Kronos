# G-Prophet 最终使用指南

## 🎯 唯一启动解决方案

**您只需要记住一个命令：**

```powershell
.\START.ps1
```

## 📋 完整使用说明

### 1. 启动服务
```powershell
# 自动启动（推荐）
.\START.ps1

# 强制重启
.\START.ps1 restart

# 诊断问题
.\START.ps1 diagnose
```

### 2. 停止服务
```powershell
taskkill /f /im python.exe
```

### 3. 访问地址
- **前端界面**: http://localhost:8501
- **API服务**: http://localhost:8000  
- **API文档**: http://localhost:8000/docs

## 🔧 功能特性

### ✅ 已修复的问题
1. **价格连续性**：开盘价跳空控制在合理范围
2. **OHLC关系**：确保价格关系正确
3. **服务稳定性**：解决窗口关闭导致的崩溃
4. **参数一致性**：前端UI与API完全同步
5. **超时处理**：增加超时时间和快速模式

### 🎯 预测模式
- **🚀 快速模式**：30秒内完成，适合快速验证
- **⚖️ 平衡模式**：1-3分钟，日常使用推荐  
- **🎯 精确模式**：3-5分钟，追求最高准确度

### 📊 参数范围
| 参数 | 范围 | 默认值 | 说明 |
|-----|------|--------|------|
| 预测天数 | 1-120天 | 30天 | 支持长期预测 |
| 历史数据长度 | 50-5000天 | 根据模式调整 | 影响预测准确度 |
| 采样次数 | 1-10次 | 根据模式调整 | 影响预测稳定性 |
| 采样温度 | 0.1-2.0 | 1.0 | 控制随机性 |
| 核采样概率 | 0.1-1.0 | 0.9 | 控制多样性 |

## 🚀 快速开始

1. **确保环境准备**
   ```powershell
   # 检查虚拟环境
   .venv\Scripts\activate
   
   # 安装依赖（如果需要）
   pip install -r app/requirements.txt
   ```

2. **启动服务**
   ```powershell
   .\START.ps1
   ```

3. **开始预测**
   - 浏览器会自动打开 http://localhost:8501
   - 输入股票代码（如：000001）
   - 选择预测模式
   - 点击"开始预测"

## 🔍 问题排查

### 如果启动失败
```powershell
# 运行诊断
.\START.ps1 diagnose

# 查看详细错误
Get-Content volumes\logs\api_stable.err -Tail 10
```

### 如果预测失败
1. **检查股票代码**：确保格式正确（6位数字）
2. **降低参数复杂度**：使用快速模式
3. **重启服务**：`.\START.ps1 restart`

### 常见问题
- **端口被占用**：脚本会自动处理
- **虚拟环境未激活**：脚本会提示
- **依赖缺失**：运行诊断查看详情

## 📁 文件结构

### 核心文件
- `START.ps1` - **唯一启动脚本**
- `app/` - 应用程序代码
- `volumes/` - 数据和日志
- `tests/` - 测试脚本

### 可选文件
- `CLEANUP.ps1` - 清理多余脚本
- `README_FINAL.md` - 本文档

## 🎉 使用建议

### 日常使用
1. **启动**：`.\START.ps1`
2. **选择平衡模式**：最佳的准确度和速度平衡
3. **使用推荐参数**：系统自动优化

### 重要决策
1. **选择精确模式**：追求最高准确度
2. **增加采样次数**：提高预测稳定性
3. **验证结果合理性**：检查价格连续性

### 快速验证
1. **选择快速模式**：30秒内完成
2. **减少预测天数**：≤10天
3. **使用默认参数**：快速获得结果

## 📞 技术支持

如果遇到问题：
1. **运行诊断**：`.\START.ps1 diagnose`
2. **查看日志**：`volumes/logs/` 目录
3. **重启服务**：`.\START.ps1 restart`
4. **检查文档**：`docs/` 目录下的详细说明

## ✅ 总结

现在您有了一个完整、稳定、功能强大的股票预测系统：

- 🎯 **唯一启动方案**：`.\START.ps1`
- 🛡️ **稳定可靠**：自动处理各种异常情况
- 📊 **预测准确**：价格连续性和OHLC关系修复
- 🚀 **使用简单**：一键启动，自动配置

享受您的股票预测之旅！🎉
